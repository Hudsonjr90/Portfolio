# .htaccess para Portfolio SPA com SEO otimizado

# Habilitar rewrite engine
RewriteEngine On

# Servir arquivos estáticos diretamente para crawlers e bots
RewriteCond %{HTTP_USER_AGENT} (googlebot|bingbot|facebookexternalhit|twitterbot|linkedinbot|whatsapp|telegram|skype) [NC]
RewriteCond %{REQUEST_URI} ^/([^/]+)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^([^/]+)/?$ /%1.html [L]

# Para usuários normais, sempre servir index.html (SPA)
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|facebookexternalhit|twitterbot|linkedinbot|whatsapp|telegram|skype) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# Cache control para assets
<filesMatch "\.(css|js|png|jpg|jpeg|gif|webp|svg|ico|woff|woff2|ttf|eot)$">
  ExpiresActive On
  ExpiresDefault "access plus 1 month"
</filesMatch>

# Compressão gzip
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

# Headers de segurança
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
Header always set X-XSS-Protection "1; mode=block"

# Forçar HTTPS (descomente se necessário)
# RewriteCond %{HTTPS} !=on
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]